# Data transformation
 The data was provided as two separate csv’s, one for the Billboard Top 100 rankings, and the other for the Spotify audio features. The kind folks at TidyTuesday already created a song_id column in both csv’s, which was the concatenation of the song name and the artist. We found that using Python to do our data merging and transformation to be the most seamless. The Jupyter Notebook with our code can be found [here](https://github.com/alexandriaGuo/billboard-top-100/blob/main/data_clean.ipynb).
 
  First, we cleaned the Billboard data, and during processing, we noticed that there were only NAs in the previous week position column, and that it corresponded to when the song first appeared on the charts. Instead of keeping them as nulls, to be slightly more descriptive, we null-filled those instances with “debut”. Then, to merge in the song characteristics, the Spotify data was left-joined onto the Billboard dataset, in order to maintain all of the Billboard data. During the initial join, we noticed an increase in the number of rows, which led to the discovery of duplicate song instances in the Spotify dataset. This was fixed by dropping one of the rows in the Spotify dataset which contained a duplicate song_ids. The final merged dataset contained 30 columns and 327,895 rows.
  
  After merging, we noticed that the Spotify genre feature was actually a list of genres that Spotify associated with the song. Additionally, there were hundreds of unique genres since Spotify is very detailed in their description of pop (dance pop, post-teen pop, space age pop, brill building pop, pop rap to name a few). To deal with this, we decided on distilling the list to a single representative genre. We went through the list of genres, and matched on a common list of genres such as rap, country, pop, k-pop, jazz, and more. If the song did not have any of those genres, it was assigned “other”. Additionally, since many songs were listed with “pop” as one of its genres, we decided to match on any of the other genres first, before resorting to pop. As a result, this might deflate the number of songs labeled as pop. Ideally, we would have been able to count all of the instances of each genre, and could be a worthwhile future improvement. 
  
  To make our plots generally more readable, we decided to filter down our dataset to songs after the 2000s, as they are more recent and relevant. The exceptions are the plots that focus on a meta-analysis by each decade, as well as for our interactive plot; in order to make the dataset a manageable size to be shared online, we decided to only use songs between 2011-2021.

